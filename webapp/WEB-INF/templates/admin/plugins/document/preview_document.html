<@pageContainer>
    <@pageColumn>
		<@pageHeader title='#i18n{document.attributeType.internallink.buttonShowPreview} : ${document.title}' class='mb-3'>
		<@aButton href='jsp/admin/plugins/document/ManageDocuments.jsp?id_space_filter=${document.spaceId}' title='#i18n{document.preview_document.space}' buttonIcon='folder'  />
		<@button type='button' class='btn-action' buttonIcon='dots-vertical fs-2 ms-3' dropdownMenu=true>
		<#list document.actions?sort_by("idAction") as action>
			<#if action.url?has_content>
				<@link href='${action.url}id_document=${document.id}&id_action=${action.idAction}' class='dropdown-item'><@icon style='${action.iconUrl}' title=action.description />${action.name}</@link>
			</#if>
		</#list>
		</@button>
		</@pageHeader>
		<@row>
			<@columns xl=3>
				<@box id='document_info'>
					<@boxHeader title='#${document.id}</span> ${document.title}' />
					<@boxBody>
						<dl>
							<dt>#i18n{document.preview_document.columnTitleType}</dt>
							<dd>${document.type}</dd>
							<#if document.state?has_content>
							<dt>#i18n{document.preview_document.columnTitleState}</dt>
							<dd>${document.state}</dd>
							</#if> 
							<dt>#i18n{document.preview_document.columnTitleDateCreation}</dt>
							<dd>${document.dateCreation}</dd> 
							<dt>#i18n{document.preview_document.columnTitleDateModification}</dt>
							<dd>${document.dateModification}</dd>
							<dt>#i18n{document.preview_document.columnTitleDateValidity}</dt>
							<#assign dateBegin="">
							<#if document.dateValidityBegin?has_content>
							<#assign dateBegin=document.dateValidityBegin?string("dd/MM/yyyy")>
							</#if>    
							<#assign dateEnd="">
							<#if document.dateValidityEnd?has_content>
							<#assign dateEnd=document.dateValidityEnd?string("dd/MM/yyyy")>
							</#if>                        
							<#assign labelBeginSince="#i18n{document.preview_document.labelDateValidityBeginSince}">
							<#assign labelBegin="#i18n{document.preview_document.labelDateValidityBegin}">
							<#assign labelEndUntil="#i18n{document.preview_document.labelDateValidityEndUntil}">
							<#assign labelEnd="#i18n{document.preview_document.labelDateValidityEnd}">
							<#if dateBegin?has_content && dateEnd?has_content>
								<dd><@icon style='calendar' /> ${labelBegin} ${dateBegin} ${labelEnd} ${dateEnd}</dd>
								<#elseif ! ( dateBegin?has_content ) && ! ( dateEnd?has_content )>   
								<@tag color='warning'>#i18n{document.preview_document.labelDateValidityNotDefined}</@tag>
								<#elseif dateBegin?has_content && !( dateEnd?has_content )>
								<dd><@icon style='calendar' /> ${labelBeginSince} ${dateBegin}</dd>
								<#elseif ! ( dateBegin?has_content ) && dateEnd?has_content>  
								<dd><@icon style='calendar' /> ${labelEndUntil} ${dateEnd}</dd>
							</#if> 
						</dl>
					</@boxBody>
				</@box>
			</@columns>
			<@columns xl=9>
				<@box>
					<@boxBody>
						${preview}
					</@boxBody>
				</@box>
			</@columns>
		</@row>
	</@pageColumn>
</@pageContainer>
